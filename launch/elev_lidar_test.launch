<launch>

		<!-- set current time as ros parameter "start_time" -->
		<node name="timestamp" pkg="hallway_sim" type="timestamp.sh"/>

		<!-- launch gazebo world -->
		<include file="$(find gazebo_ros)/launch/empty_world.launch">
			<arg name="world_name" value="$(find hallway_sim)/gazebo/emptyworld.world"/>
		</include>

		<!-- spawn elevator into gazebo -->
		<param name="robot_description" textfile="$(find hallway_sim)/urdf/elevator.urdf"/>

		<node name="spawn_elev" pkg="gazebo_ros" type="spawn_model" args="-file $(find hallway_sim)/urdf/elevator.urdf -urdf -z 0 -x 5 -Y -4.7124 -model elevator" />

		<rosparam file="$(find hallway_sim)/config/elevator_control.yaml" command="load"/>

		<node name="controller_spawner" pkg="controller_manager" type="spawner" ns="/elevator" args="door_to_ground_joint_position_controller joint_state_controller"/>

		<node name="elev_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="false" output="screen">
			<remap from="/joint_states" to="/elevator/joint_states"/>
		</node>

		<!-- set robot model -->
		<!-- <arg name="model" default="$(find floatinghead_description)/urdf/floatinghead.urdf"/> -->
		<arg name="model" default="$(find lidar_nav)/urdf/lidar_body.urdf"/>

		<!-- send fake joint values -->
		<node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
			<param name="use_gui" value="TRUE"/>
		</node>

		<!-- Combine joint values -->
		<node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

		<!-- initiate rviz -->
		<!-- <node type="rviz" name="rviz" pkg="rviz" args="-d $(find floatinghead_description)/rviz/floatinghead.rviz" /> -->
		<node type="rviz" name="rviz" pkg="rviz" args="-d $(find lidar_nav)/rviz/lidar_rviz.rviz" />
		<param name="robot_description" command="cat $(arg model)" />

		<!-- spawn robot -->
		<!-- <node name="spawn_robot" pkg="gazebo_ros" type="spawn_model" args="-file $(find floatinghead_description)/urdf/floatinghead.urdf -urdf -z .1 -model floatinghead" /> -->
		<!-- <node name="rqt_gui" pkg="rqt_gui" type="rqt_gui" args="-perspective-file $(find floatinghead_description)/rqt/floatinghead.perspective"/> -->
		<node name="spawn_robot" pkg="gazebo_ros" type="spawn_model" args="-file $(find lidar_nav)/urdf/lidar_body.urdf -urdf -z .1 -model floatinghead" />
		<node name="rqt_gui" pkg="rqt_gui" type="rqt_gui" args="--perspective-file $(find lidar_nav)/rqt/floatinghead.perspective"/>

		<!-- run control nodes -->
		<node name="lidar_quad_node" pkg="hallway_sim" type="lidar_quad_node.py"/>
		<!-- <node name="gazebo_drive_node" pkg="hallway_sim" type="gazebo_drive_node.py"/> -->

		<!-- echo robot position to file -->
		<!-- <node name="robot_sub_node" pkg="hallway_sim" type="robot_sub_node.py"/> -->

</launch>
